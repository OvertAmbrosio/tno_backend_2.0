(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{244:function(e,t,a){e.exports=a(429)},249:function(e,t,a){},429:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(14),o=a.n(c),i=a(17),u=a(19),l=a(530),s=a(531),p=(a(249),a(221)),m=a(123),d=Object(p.a)({palette:{primary:{main:"#556cd6"},secondary:{main:"#19857b"},error:{main:m.a.A400},background:{default:"#fff"}}}),f=a(62);function b(e){return r.a.createElement(f.a,{style:{marginBottom:"1rem",flexGrow:1},component:"h2",variant:"h6",color:"primary",noWrap:!0},e.children)}var h=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(b,null,"Dashboard"),"Pagina de incio para mostrar el estado y resumen de la web y sus componentes.")},v=a(2),g=a.n(v),E=a(7),O=a(8),j=a(40),y=a.n(j),w=a(432),x=a(487),k=a(488),S=a(489),C=a(490),P=a(491),T=a(492),N=a(493),A=a(499),D=a(533),I=a(124),B=a(497),z=a(486),q=a(494),W=a(495),M=a(496),_=a(498),Y=a(15),L=a(151),G=a.n(L),R=a(41),H=a.n(R),F=a(34),U="https://tno-v2.herokuapp.com/api/private",V="https://tunovelaonline.com",J="tno_cms.authToken",K=function(){var e=Object(E.a)(g.a.mark((function e(t){var a,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=F.a.loading("Iniciando sesi\xf3n...",{hideAfter:0,position:"top-right",role:"success"}),n=G.a.create({baseURL:U}),e.next=4,n(Object(Y.a)({},t)).then((function(e){var t=e.data;if(a.hide(),t&&t.data)return F.a.success(t.message,{position:"top-right"}),{data:t.data,errors:!1};throw F.a.error("No se puede obtener la data",{position:"top-right"}),Error("No se puede obtener la data")})).catch((function(e){if(a.hide(),e.response){console.log(e.response);var t=e.response.data;return F.a.warn(void 0!==t.message?t.message:"Error en la solicitud.",{position:"top-right"}),{data:!1,errors:t}}throw e.request?(console.log(e.request),F.a.warn("Se realiz\xf3 la solicitud, pero no se recibi\xf3 respuesta.",{position:"top-right"}),e):(F.a.error("Algo sucedi\xf3 al configurar la solicitud que provoc\xf3 un error.",{position:"top-right"}),e)}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=Object(E.a)(g.a.mark((function e(t){var a,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=F.a.loading("Cargando...",{hideAfter:0,position:"top-right",role:"success"}),n=G.a.create({baseURL:U,headers:{Authorization:"Bearer "+H.a.get(J)}}),e.next=4,n(Object(Y.a)({},t)).then((function(e){var t=e.data;return a.hide(),F.a[t.status](t.message,{position:"top-right"}),t})).catch((function(e){if(a.hide(),e.response){console.log(e.response);var t=e.response.data;return"401"===String(e.response.status)?(F.a.error("Token Invalido, cerrando sesi\xf3n.",{position:"top-right"}),H.a.remove(J),document.location.href="/"):F.a.warn(void 0!==t.message?t.message:"Error en la solicitud.",{position:"top-right"}),{data:{status:"error"},errors:t}}throw e.request?(console.log(e.request),F.a.warn("Se realiz\xf3 la solicitud, pero no se recibi\xf3 respuesta.",{position:"top-right"}),e):(F.a.error("Algo sucedi\xf3 al configurar la solicitud que provoc\xf3 un error.",{position:"top-right"}),e)}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=Object(E.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",X({url:"novels",method:"GET",params:t}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(){var e=Object(E.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",X({url:"novels/".concat(t),method:"GET"}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=Object(E.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",X({url:"novels",method:"POST",data:t}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ee=function(){var e=Object(E.a)(g.a.mark((function e(t,a,n){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",X({url:"novels",method:"PATCH",data:t,params:Object(Y.a)({},a),headers:{Metodo:n}}));case 1:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),te=function(){var e=Object(E.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",X({url:"novels",method:"DELETE",params:{id:t},headers:{Metodo:"borrarNovela"}}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ae=a(431),ne=a(481),re=a(482),ce=a(483),oe=a(484),ie=a(485),ue=r.a.forwardRef((function(e,t){return r.a.createElement(ae.a,Object.assign({direction:"up",ref:t},e))}));function le(e){var t=e.visible,a=e.abrir,n=e.titulo,c=e.cuerpo,o=e.accion;return r.a.createElement(ne.a,{open:t,TransitionComponent:ue,keepMounted:!0,onClose:a,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description"},r.a.createElement(re.a,{id:"alert-dialog-slide-title"},n),r.a.createElement(ce.a,null,r.a.createElement(oe.a,{id:"alert-dialog-slide-description"},c)),r.a.createElement(ie.a,null,r.a.createElement(w.a,{onClick:a,color:"primary"},"Cancelar"),r.a.createElement(w.a,{onClick:o,color:"primary"},"Aceptar")))}var se=a(85),pe=a(504),me=a(500),de=a(503),fe=a(433),be=a(505),he=a(534),ve=a(506),ge=a(205),Ee=[188,13];var Oe=function(e){var t=e.sugerencias,a=void 0===t?[]:t,n=e.etiquetas,c=void 0===n?[]:n,o=e.guardar;return r.a.createElement("div",{style:{margin:8}},r.a.createElement(ge.WithContext,{tags:c,suggestions:a,delimiters:Ee,handleDelete:function(e){var t=c.filter((function(t,a){return a!==e}));o(t)},handleAddition:function(e){var t=[].concat(Object(se.a)(c),[e]);o(t)},handleDrag:function(e,t,a){var n=c.slice();n.splice(t,1),n.splice(a,0,e),o(n)},autofocus:!1,inputFieldPosition:"bottom"}))},je=function(){var e=Object(E.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",X({url:"extras/all",method:"GET"}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ye=function(){var e=Object(E.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",X({url:"extras",method:"GET",params:{tipo:t}}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),we=function(){var e=Object(E.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",X({url:"extras",method:"POST",data:t}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),xe=function(){var e=Object(E.a)(g.a.mark((function e(t,a){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",X({url:"extras",method:"PATCH",data:{data:t,id:a},headers:{Metodo:"actualizarExtra"}}));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),ke=function(){var e=Object(E.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",X({url:"extras",method:"DELETE",params:{id:t},headers:{Metodo:"borrarExtra"}}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var Se=function(e){var t=e.novela,a=void 0===t?{}:t,c=e.guardar,o=Object(n.useState)([]),i=Object(O.a)(o,2),u=i[0],l=i[1],s=Object(n.useState)([]),p=Object(O.a)(s,2),m=p[0],d=p[1],f=Object(n.useState)([]),b=Object(O.a)(f,2),h=b[0],v=b[1],j=Object(n.useState)({titulo:"",titulo_alt:"",acron:"",autor:"",sinopsis:"",observacion:"",estado:"emision",tipo:"",categorias:[],etiquetas:[]}),y=Object(O.a)(j,2),x=y[0],k=y[1];function S(){return(S=Object(E.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,je().then((function(e){var t=e.data;t.length>0&&(l(t.filter((function(e){return 1===e.tipo}))),d(t.filter((function(e){return 2===e.tipo}))),v(t.filter((function(e){return 3===e.tipo})).map((function(e){return{id:e.nombre,text:e.nombre}}))))})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(n.useEffect)((function(){!function(){S.apply(this,arguments)}()}),[]),Object(n.useEffect)((function(){Object.entries(a).length>0&&k(Object(Y.a)({},a))}),[a]);var C=function(){var e=Object(E.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,c(x);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("form",{autoComplete:"off",style:{marginRight:"1rem"},onSubmit:C},r.a.createElement("div",null,r.a.createElement(pe.a,{required:!0,fullWidth:!0,style:{margin:8},margin:"dense",id:"titulo",label:"Titulo",value:x.titulo,onChange:function(e){return k(Object(Y.a)(Object(Y.a)({},x),{},{titulo:e.target.value}))}}),r.a.createElement(pe.a,{required:!0,fullWidth:!0,style:{margin:8},margin:"dense",id:"titulo_alt",label:"Titulo Alternativo",value:x.titulo_alt,onChange:function(e){return k(Object(Y.a)(Object(Y.a)({},x),{},{titulo_alt:e.target.value}))}}),r.a.createElement(pe.a,{required:!0,style:{margin:8},margin:"dense",id:"acron",label:"Acr\xf3nimo",value:x.acron,onChange:function(e){return k(Object(Y.a)(Object(Y.a)({},x),{},{acron:e.target.value}))}}),r.a.createElement(pe.a,{required:!0,style:{margin:8},margin:"dense",id:"autor",fullWidth:!0,label:"Autor",value:x.autor,onChange:function(e){return k(Object(Y.a)(Object(Y.a)({},x),{},{autor:e.target.value}))}}),r.a.createElement(pe.a,{required:!0,style:{margin:8},margin:"dense",id:"estado",select:!0,label:"Estado",value:x.estado,onChange:function(e){return k(Object(Y.a)(Object(Y.a)({},x),{},{estado:e.target.value}))},helperText:"Selecciona el estado de la novela"},r.a.createElement(me.a,{value:"emision"},"Emisi\xf3n"),r.a.createElement(me.a,{value:"finalizado"},"Finalizado"),r.a.createElement(me.a,{value:"cancelado"},"Cancelado")),u.length>0&&r.a.createElement(pe.a,{required:!0,style:{margin:8},margin:"dense",id:"tipo",select:!0,label:"Tipo",value:x.tipo,onChange:function(e){return k(Object(Y.a)(Object(Y.a)({},x),{},{tipo:e.target.value}))},helperText:"Selecciona el estado de la novela"},u.map((function(e,t){return r.a.createElement(me.a,{key:t,value:e.nombre},e.nombre)}))),r.a.createElement("br",null),m.length>0&&r.a.createElement(de.a,null,m.map((function(e,t){return r.a.createElement(fe.a,{key:t,dense:!0,button:!0,onClick:(a=e.nombre,function(){var e=x.categorias.indexOf(a),t=Object(se.a)(x.categorias);-1===e?t.push(a):t.splice(e,1),k(Object(Y.a)(Object(Y.a)({},x),{},{categorias:Object(se.a)(t)}))})},r.a.createElement(be.a,null,r.a.createElement(he.a,{edge:"start",checked:-1!==x.categorias.indexOf(e.nombre),tabIndex:-1,disableRipple:!0,inputProps:{"aria-labelledby":e.nombre}})),r.a.createElement(ve.a,{id:e.nombre,primary:e.nombre}));var a}))),h.length>0&&r.a.createElement(Oe,{sugerencias:h,etiquetas:x.etiquetas.length>0?x.etiquetas.map((function(e){return{id:e,text:e}})):x.etiquetas,guardar:function(e){e.length>0&&k(Object(Y.a)(Object(Y.a)({},x),{},{etiquetas:e.map((function(e){return e.text}))}))}}),r.a.createElement(pe.a,{required:!0,style:{margin:8},margin:"dense",id:"sinopsis",label:"Sinopsis",multiline:!0,fullWidth:!0,rows:5,placeholder:"Sinopsis de la novela, usar etiqueta '<p></p>' para parrafos",variant:"outlined",value:x.sinopsis,onChange:function(e){return k(Object(Y.a)(Object(Y.a)({},x),{},{sinopsis:e.target.value}))}}),r.a.createElement(pe.a,{required:!0,style:{margin:8},margin:"dense",id:"observacion",label:"Observacion",multiline:!0,fullWidth:!0,rows:2,placeholder:"Observaciones",variant:"outlined",value:x.observacion,onChange:function(e){return k(Object(Y.a)(Object(Y.a)({},x),{},{observacion:e.target.value}))}}),r.a.createElement(w.a,{type:"submit",variant:"contained",color:"primary",style:{margin:"1rem"}},"Guardar")))};var Ce=a(507),Pe=a(535),Te=a(508),Ne=a(509),Ae=a(207),De=a.n(Ae),Ie=Object(Ce.a)((function(e){return{root:{width:"100%"},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0},secondaryHeading:{fontSize:e.typography.pxToRem(15),color:e.palette.text.secondary}}}));var Be=function(e){var t=e.abierto,a=e.abrir,n=e.children,c=e.titulo,o=e.subtitulo,i=e.panel,u=Ie();return r.a.createElement(Pe.a,{expanded:t===i,onChange:a(i)},r.a.createElement(Te.a,{expandIcon:r.a.createElement(De.a,null),"aria-controls":"panel1bh-content",id:"panel1bh-header"},r.a.createElement(f.a,{className:u.heading},c),r.a.createElement(f.a,{className:u.secondaryHeading},o)),r.a.createElement(Ne.a,null,n))},ze=a(510),qe=a(511),We=Object(Ce.a)({root:{minWidth:275},title:{fontSize:14},pos:{marginBottom:12}});var Me=function(e){var t=e.novela,a=We();return r.a.createElement(ze.a,{className:a.root},r.a.createElement(qe.a,null,r.a.createElement(f.a,{className:a.title,color:"textSecondary",gutterBottom:!0},"Subido Por:"),r.a.createElement(f.a,{variant:"h6",component:"h2",className:a.pos},t.subidoPor?t.subidoPor.username:"-"),r.a.createElement(f.a,{className:a.title,color:"textSecondary",gutterBottom:!0},"Actualizado Por:"),r.a.createElement(f.a,{variant:"h6",component:"h2",className:a.pos},t.actualizadoPor?t.actualizadoPor.username:"-"),r.a.createElement(f.a,{className:a.title,color:"textSecondary",gutterBottom:!0},"Fecha Creaci\xf3n:"),r.a.createElement(f.a,{variant:"h6",component:"h2",className:a.pos},t.createdAt?y()(t.createdAt).format("DD-MM-YYYY"):"-"),r.a.createElement(f.a,{className:a.title,color:"textSecondary",gutterBottom:!0},"Fecha Actualizado:"),r.a.createElement(f.a,{variant:"h6",component:"h2",className:a.pos},t.updatedAt?y()(t.updatedAt).format("DD-MM-YYYY"):"-"),r.a.createElement(f.a,{className:a.title,color:"textSecondary",gutterBottom:!0},"Rating:"),r.a.createElement(f.a,{variant:"h6",component:"h2",className:a.pos},"Contador: ",t.rating?t.rating.contador:"-"," ","Valor: ",t.rating?t.rating.valor:"-")))},_e=a(208),Ye=a.n(_e);var Le=function(e){var t=e.novela,a=e.activar;return r.a.createElement("div",null,r.a.createElement(f.a,{color:"secondary",style:{marginBottom:"1rem"}},"En caso de borrar una novela y esta tenga capitulos o imagenes vinculados, entonces se pondr\xe1 en modo inactivo. Aqui puedes activarla de nuevo."),r.a.createElement("div",{style:{margin:"auto"}},r.a.createElement(Ye.a,{style:{color:t.activo?I.a[500]:m.a[500]}})),r.a.createElement(w.a,{variant:"contained",color:"primary",onClick:a},"Activar"))},Ge=a(436),Re=a(441),He=a(439),Fe=a(437);var Ue=function(e){var t=e.imagenes,a=void 0===t?[]:t,c=e.actualizarImagen,o=Object(n.useState)(""),i=Object(O.a)(o,2),u=i[0],l=i[1],s=Object(n.useState)(""),p=Object(O.a)(s,2),m=p[0],d=p[1],b=function(){var e=Object(E.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===u){e.next=4;break}return t=a[u],e.next=4,c(t.url,t.contentType,m);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(f.a,{color:"secondary",style:{marginBottom:"1rem"}},"Editar imagenes"),r.a.createElement(Ge.a,{style:{minWidth:120,margin:"1rem"}},r.a.createElement(Re.a,{id:"seleccionar-imagen"},"Imagen"),r.a.createElement(He.a,{labelId:"seleccionar-imagen",id:"seleccion-imagen",value:u,onChange:function(e){return l(e.target.value)}},a.length>0?a.map((function(e,t){return r.a.createElement(me.a,{key:t,value:t},"".concat(e.titulo," - ").concat(e.tipo))})):r.a.createElement(me.a,{value:"nada"},r.a.createElement("em",null,"Sin datos"))),r.a.createElement(Fe.a,null,"Selecciona la imagen")),r.a.createElement(Ge.a,{style:{minWidth:120,margin:"1rem"}},r.a.createElement(Re.a,{id:"seleccionar-tipo"},"Tipo"),r.a.createElement(He.a,{labelId:"seleccionar-tipo",id:"seleccion-de-tipo",value:m,onChange:function(e){return d(e.target.value)}},r.a.createElement(me.a,{value:"miniatura"},"Miniatura"),r.a.createElement(me.a,{value:"portada"},"Portada")),r.a.createElement(Fe.a,null,"Selecciona el tipo de imagen")),r.a.createElement("br",null),r.a.createElement(w.a,{variant:"contained",color:"primary",onClick:b},"Guardar"))},Ve=a(224),Je=Object(Ce.a)((function(e){return{root:{backgroundColor:e.palette.background.paper}}}));var Ke=function(e){var t=e.novela,a=void 0===t?{}:t,n=e.capitulos,c=void 0===n?[]:n,o=e.guardar,i=Je(),u=r.a.useState(null),l=Object(O.a)(u,2),s=l[0],p=l[1],m=r.a.useState(null),d=Object(O.a)(m,2),b=d[0],h=d[1];function v(){return(v=Object(E.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(c.length>0&&null!==b)){e.next=3;break}return e.next=3,o(c[b]._id);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.createElement("div",{className:i.root},r.a.createElement(f.a,{color:"secondary",style:{marginBottom:"1rem"}},"Editar el capitulo en emisi\xf3n"),r.a.createElement(de.a,{component:"nav","aria-label":"Lista de Capitulos"},r.a.createElement(fe.a,{button:!0,"aria-haspopup":"true","aria-controls":"lock-menu","aria-label":"lista de capitulos",onClick:function(e){p(e.currentTarget)}},r.a.createElement(ve.a,{primary:"Lista de Capitulos",secondary:null===b?a.capitulo_emision?"".concat(a.capitulo_emision.numero," - ").concat(a.capitulo_emision.titulo):"-":c.length>0?"".concat(c[b].numero," - ").concat(c[b].titulo):"-"}))),r.a.createElement(Ve.a,{id:"lock-menu",anchorEl:s,keepMounted:!0,open:Boolean(s),onClose:function(){p(null)}},c.length>0?c.map((function(e,t){return r.a.createElement(me.a,{key:e._id,selected:t===b,onClick:function(e){return function(e,t){h(t),p(null)}(0,t)}},e.numero," - ",e.titulo)})):r.a.createElement(me.a,null,"Sin datos.")),r.a.createElement(w.a,{variant:"contained",color:"primary",onClick:function(){return v.apply(this,arguments)}},"Guardar"))},Xe=function(){var e=Object(E.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",X({url:"chapters/chapter/".concat(t),method:"GET"}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$e=function(){var e=Object(E.a)(g.a.mark((function e(t,a){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",X({url:"chapters",method:"GET",params:{page:t,limit:a}}));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Qe=function(){var e=Object(E.a)(g.a.mark((function e(t,a,n){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",X({url:"chapters/novel",method:"GET",params:{page:t,limit:a,novela:n}}));case 1:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),Ze=function(){var e=Object(E.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",X({url:"chapters/list",method:"GET",params:{id:t}}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),et=function(){var e=Object(E.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",X({url:"chapters",method:"POST",data:t}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),tt=function(){var e=Object(E.a)(g.a.mark((function e(t,a){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",X({url:"chapters",method:"PATCH",data:{data:a,id:t},headers:{Metodo:"actualizarCapitulo"}}));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),at=function(){var e=Object(E.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",X({url:"chapters",method:"DELETE",params:{id:t},headers:{Metodo:"borrarCapitulo"}}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),nt=function(){var e=Object(E.a)(g.a.mark((function e(t,a){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",X({url:"images",method:"GET",params:{page:t,limit:a}}));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),rt=function(){var e=Object(E.a)(g.a.mark((function e(t,a,n){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",X({url:"images/novel",method:"GET",params:{page:t,limit:a,novela:n}}));case 1:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),ct=function(){var e=Object(E.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",X({url:"images/list",method:"GET",params:{novela:t}}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ot=function(){var e=Object(E.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",X({url:"images/image/".concat(t),method:"GET"}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),it=function(){var e=Object(E.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",X({url:"images",method:"POST",data:t,headers:{"Content-Type":"multipart/form-data"}}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ut=function(){var e=Object(E.a)(g.a.mark((function e(t,a){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",X({url:"images",method:"DELETE",params:{id:t,key:a},headers:{Metodo:"borrarImagen"}}));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();var lt=Object(u.g)((function(e){var t=e.match,a=Object(u.f)(),c=Object(n.useState)({}),o=Object(O.a)(c,2),i=o[0],l=o[1],s=Object(n.useState)([]),p=Object(O.a)(s,2),m=p[0],d=p[1],f=Object(n.useState)([]),h=Object(O.a)(f,2),v=h[0],j=h[1],y=Object(n.useState)(!1),w=Object(O.a)(y,2),x=w[0],k=w[1],S=t.params.id;function C(){return(C=Object(E.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q(t).then((function(e){var t=e.data;Object.entries(t).length>0&&l(t)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(){return(P=Object(E.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ze(t).then((function(e){var t=e.data;t.length>0&&d(t)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(){return(T=Object(E.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ct(t).then((function(e){var t=e.data;t.length>0&&j(t)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(){return(N=Object(E.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee(t,{id:S},"actualizarNovela").then((function(){return a.push("/cms/novela")}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(){return(A=Object(E.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee(null,{id:S,chapter:t},"actualizarCapituloEmision");case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(){return(D=Object(E.a)(g.a.mark((function e(t,a,n){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee(null,{id:S,image:t,extencion:a,tipo:n},"actualizarImagenes");case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(){return(I=Object(E.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee(null,{id:S},"activarNovela");case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(n.useEffect)((function(){console.log(S),S&&(function(e){C.apply(this,arguments)}(S),function(e){P.apply(this,arguments)}(S),function(e){T.apply(this,arguments)}(S))}),[S]);var B=function(e){return function(t,a){k(!!a&&e)}};return r.a.createElement("div",null,r.a.createElement(b,null,"Editar Novela"),r.a.createElement(Se,{guardar:function(e){return N.apply(this,arguments)},novela:i}),r.a.createElement(Be,{abierto:x,abrir:B,titulo:"Detalles",subtitulo:"Datos extras de la novela",panel:"panel1"},r.a.createElement(Me,{novela:i})),r.a.createElement(Be,{abierto:x,abrir:B,titulo:"Emisi\xf3n",subtitulo:"Editar Capitulo en emisi\xf3n",panel:"panel2"},r.a.createElement(Ke,{novela:i,capitulos:m,guardar:function(e){return A.apply(this,arguments)}})),r.a.createElement(Be,{abierto:x,abrir:B,titulo:"Imagenes",subtitulo:"Editar imagenes de portada y miniatura",panel:"panel3"},r.a.createElement(Ue,{imagenes:v,actualizarImagen:function(e,t,a){return D.apply(this,arguments)}})),r.a.createElement(Be,{abierto:x,abrir:B,titulo:"Configuracion",subtitulo:"Activar novela",panel:"panel4"},r.a.createElement(Le,{novela:i,activar:function(){return I.apply(this,arguments)}})))}));var st=function(e){var t=e.listaCapitulos,a=void 0===t?[]:t,c=e.total,o=void 0===c?1:c,u=e.rowsPerPage,l=void 0===u?30:u,s=e.page,p=void 0===s?0:s,d=e.cambiarPagina,f=e.cambiarLimite,b=e.borrarCapitulo,h=Object(n.useState)(""),v=Object(O.a)(h,2),j=v[0],I=v[1],z=Object(n.useState)(""),q=Object(O.a)(z,2),W=q[0],Y=q[1],L=Object(n.useState)(!1),G=Object(O.a)(L,2),R=G[0],H=G[1];function F(){return(F=Object(E.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b(W);case 2:U();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var U=function(){return H(!R)};return r.a.createElement("div",null,r.a.createElement(x.a,{style:{maxHeight:500}},r.a.createElement(k.a,{stickyHeader:!0},r.a.createElement(S.a,null,r.a.createElement(C.a,null,r.a.createElement(P.a,{align:"center"},"Capitulo"),r.a.createElement(P.a,null,"Titulo"),r.a.createElement(P.a,null,"Novela"),r.a.createElement(P.a,{align:"center"},"Subido Por"),r.a.createElement(P.a,{align:"center"},"Actualizado Por"),r.a.createElement(P.a,{align:"center"},"Actualizado"),r.a.createElement(P.a,{align:"center"},"Acciones"))),r.a.createElement(T.a,null,a.length>0?a.map((function(e,t){return r.a.createElement(C.a,{key:t},r.a.createElement(P.a,{align:"center"},e.numero),r.a.createElement(P.a,null,e.titulo),r.a.createElement(P.a,null,e.novela&&e.novela.titulo?e.novela.titulo:"-"),r.a.createElement(P.a,{align:"center"},e.subidoPor?e.subidoPor.username:"-"),r.a.createElement(P.a,{align:"center"},e.actualizadoPor?e.actualizadoPor.username:"-"),r.a.createElement(P.a,{align:"center"},y()(e.updatedAt).format("DD-MM-YYYY")),r.a.createElement(P.a,null,r.a.createElement(N.a,{size:"small"},r.a.createElement(w.a,{component:i.b,to:"/cms/capitulo/editar/".concat(e._id),params:{id:e._id}},r.a.createElement(M.a,{style:{color:B.a[500]}})),r.a.createElement(w.a,{onClick:function(){return t=e._id,a=e.titulo,I(a),Y(t),void U();var t,a}},r.a.createElement(_.a,{style:{color:m.a[500]}})))))})):r.a.createElement(C.a,{style:{height:120}},r.a.createElement(P.a,null,"Sin datos."))))),r.a.createElement(k.a,null,r.a.createElement(A.a,null,r.a.createElement(C.a,null,r.a.createElement(D.a,{rowsPerPageOptions:[30,50,100],colSpan:3,count:o,rowsPerPage:l,page:p,SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0},onChangePage:d,onChangeRowsPerPage:f})))),r.a.createElement(le,{titulo:"Eliminar '".concat(j,"'"),cuerpo:"Esta acci\xf3n no se puede deshacer.",abrir:U,visible:R,accion:function(){return F.apply(this,arguments)}}))};var pt=Object(u.g)((function(e){var t=e.match,a=Object(n.useState)([]),c=Object(O.a)(a,2),o=c[0],u=c[1],l=Object(n.useState)(0),s=Object(O.a)(l,2),p=s[0],m=s[1],d=Object(n.useState)(30),f=Object(O.a)(d,2),h=f[0],v=f[1],j=Object(n.useState)(1),y=Object(O.a)(j,2),x=y[0],k=y[1],S=t.params.id;function C(e,t,a){return P.apply(this,arguments)}function P(){return(P=Object(E.a)(g.a.mark((function e(t,a,n){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qe(t,a,n).then((function(e){var t=e.data;t.docs&&t.docs.length>0?(u(t.docs),k(t.totalDocs)):console.log("sin caps")})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(){return(T=Object(E.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=4;break}return e.next=3,at(t).then(Object(E.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(Number(p)+1,h,S);case 2:case"end":return e.stop()}}),e)}))));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(n.useEffect)((function(){S&&C(1,30,S)}),[S]);var N=function(){var e=Object(E.a)(g.a.mark((function e(t,a){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(a),e.next=3,C(Number(a)+1,h,S);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),A=function(){var e=Object(E.a)(g.a.mark((function e(t){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=parseInt(t.target.value,10),v(a),m(0),e.next=5,C(1,a,S);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(b,null,"Lista de Capitulos"),r.a.createElement(w.a,{component:i.b,to:"/cms/capitulo/crear/".concat(S),params:{id:S},variant:"contained",startIcon:r.a.createElement(z.a,null),style:{marginBottom:".5rem",backgroundColor:I.a[500],color:"white"}},"Nuevo"),r.a.createElement(st,{listaCapitulos:o,total:x,rowsPerPage:h,page:p,cambiarPagina:N,cambiarLimite:A,borrarCapitulo:function(e){return T.apply(this,arguments)}}))})),mt=a(514),dt=a(512),ft=a(513);var bt=function(e){var t=e.visible,a=e.abrir,c=e.imagen,o=void 0===c?{}:c,i=e.loading,u=Object(n.useState)(100),l=Object(O.a)(u,2),s=l[0],p=l[1],m=Object(n.useState)(100),d=Object(O.a)(m,2),b=d[0],h=d[1];return Object(n.useEffect)((function(){if(void 0!==o.url&&null!==o.url){var e=new Image;e.src=o.url,e.onload=function(){p(this.height),h(this.width)}}}),[o]),r.a.createElement(ne.a,{open:t,onClose:a,"aria-labelledby":"detalle-imagen","aria-describedby":"detalle-imagen-seleccionada"},r.a.createElement(re.a,{id:"detalle-imagen"},"Detalle de la imagen"),r.a.createElement(ce.a,null,i?r.a.createElement(dt.a,null):r.a.createElement(ze.a,null,r.a.createElement(ft.a,{style:{height:s,width:b},image:o.url,title:o.titulo}),r.a.createElement(qe.a,null,r.a.createElement(f.a,{gutterBottom:!0,variant:"h5",component:"h2"},o.titulo),r.a.createElement(f.a,{variant:"h6",color:"textSecondary",component:"h6"},"Tipo:"),r.a.createElement(f.a,{variant:"body2",color:"textSecondary",component:"p"},o.tipo),r.a.createElement(f.a,{variant:"h6",color:"textSecondary",component:"h6"},"Extenci\xf3n:"),r.a.createElement(f.a,{variant:"body2",color:"textSecondary",component:"p"},o.contentType),r.a.createElement(f.a,{variant:"h6",color:"textSecondary",component:"h6"},"Key:"),r.a.createElement(f.a,{variant:"body2",color:"textSecondary",component:"p"},o.key)))),r.a.createElement(ie.a,null,r.a.createElement(w.a,{onClick:a,color:"primary",autoFocus:!0},"Aceptar")))};var ht=function(e){var t=e.listaImagenes,a=void 0===t?[]:t,c=e.total,o=void 0===c?1:c,i=e.rowsPerPage,u=void 0===i?30:i,l=e.page,s=void 0===l?0:l,p=e.cambiarPagina,d=e.cambiarLimite,f=e.borrarImagen,b=Object(n.useState)(""),h=Object(O.a)(b,2),v=h[0],j=h[1],B=Object(n.useState)(null),z=Object(O.a)(B,2),q=z[0],W=z[1],M=Object(n.useState)(null),Y=Object(O.a)(M,2),L=Y[0],G=Y[1],R=Object(n.useState)(!1),H=Object(O.a)(R,2),F=H[0],U=H[1],V=Object(n.useState)(!1),J=Object(O.a)(V,2),K=J[0],X=J[1],$=Object(n.useState)(!1),Q=Object(O.a)($,2),Z=Q[0],ee=Q[1],te=Object(n.useState)({}),ae=Object(O.a)(te,2),ne=ae[0],re=ae[1];function ce(){return(ce=Object(E.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(q,L);case 2:ue();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oe(e){return ie.apply(this,arguments)}function ie(){return(ie=Object(E.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===t||void 0===t){e.next=4;break}return ee(!0),e.next=4,ot(t).then((function(e){var t=e.data;re(t),ee(!1)})).catch((function(e){console.log(e),ee(!1)}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ue=function(){return U(!F)},se=function(){return X(!K)},pe=function(){var e=Object(E.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe(t);case 2:se();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(x.a,{style:{maxHeight:500}},r.a.createElement(k.a,{stickyHeader:!0},r.a.createElement(S.a,null,r.a.createElement(C.a,null,r.a.createElement(P.a,null,"Titulo"),r.a.createElement(P.a,null,"Tipo"),r.a.createElement(P.a,{align:"center"},"Novela"),r.a.createElement(P.a,{align:"center"},"Subido Por"),r.a.createElement(P.a,{align:"center"},"Actualizado"),r.a.createElement(P.a,{align:"center"},"Acciones"))),r.a.createElement(T.a,null,a.length>0?a.map((function(e,t){return r.a.createElement(C.a,{key:t},r.a.createElement(P.a,null,e.titulo),r.a.createElement(P.a,null,e.tipo),r.a.createElement(P.a,null,e.novela&&e.novela.titulo?e.novela.titulo:"-"),r.a.createElement(P.a,{align:"center"},e.subidoPor?e.subidoPor.username:"-"),r.a.createElement(P.a,{align:"center"},y()(e.updatedAt).format("DD-MM-YYYY")),r.a.createElement(P.a,null,r.a.createElement(N.a,null,r.a.createElement(w.a,{onClick:function(){return pe(e._id)}},r.a.createElement(mt.a,{style:{color:I.a[500]}})),r.a.createElement(w.a,{onClick:function(){return t=e._id,a=e.key,n=e.titulo,j(n),G(a),W(t),void ue();var t,a,n}},r.a.createElement(_.a,{style:{color:m.a[500]}})))))})):r.a.createElement(C.a,{style:{height:120}},r.a.createElement(P.a,null,"Sin datos."))))),r.a.createElement(k.a,null,r.a.createElement(A.a,null,r.a.createElement(C.a,null,r.a.createElement(D.a,{rowsPerPageOptions:[30,50,100],colSpan:3,count:o,rowsPerPage:u,page:s,SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0},onChangePage:p,onChangeRowsPerPage:d})))),r.a.createElement(le,{titulo:"Eliminar '".concat(v,"'"),cuerpo:"Esta acci\xf3n no se puede deshacer.",abrir:ue,visible:F,accion:function(){return ce.apply(this,arguments)}}),r.a.createElement(bt,{visible:K,abrir:se,imagen:ne,loading:Z}))};var vt=Object(u.g)((function(e){var t=e.match,a=Object(n.useState)([]),c=Object(O.a)(a,2),o=c[0],u=c[1],l=Object(n.useState)(0),s=Object(O.a)(l,2),p=s[0],m=s[1],d=Object(n.useState)(30),f=Object(O.a)(d,2),h=f[0],v=f[1],j=Object(n.useState)(1),y=Object(O.a)(j,2),x=y[0],k=y[1],S=t.params.id;function C(e,t,a){return P.apply(this,arguments)}function P(){return(P=Object(E.a)(g.a.mark((function e(t,a,n){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rt(t,a,n).then((function(e){var t=e.data;t.docs&&t.docs.length>0&&(u(t.docs),k(t.totalDocs))}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(){return(T=Object(E.a)(g.a.mark((function e(t,a){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!a){e.next=4;break}return e.next=3,ut(t,a).then(Object(E.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(Number(p)+1,h,S);case 2:case"end":return e.stop()}}),e)}))));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(n.useEffect)((function(){S&&C(1,30,S)}),[S]);var N=function(){var e=Object(E.a)(g.a.mark((function e(t,a){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(a),e.next=3,C(Number(a)+1,h,S);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),A=function(){var e=Object(E.a)(g.a.mark((function e(t){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=parseInt(t.target.value,10),v(a),m(0),e.next=5,C(1,a,S);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(b,null,"Lista de Imagenes"),r.a.createElement(w.a,{component:i.b,to:"/cms/imagen/crear/".concat(S),params:{id:S},variant:"contained",startIcon:r.a.createElement(z.a,null),style:{marginBottom:".5rem",backgroundColor:I.a[500],color:"white"}},"Nuevo"),r.a.createElement(ht,{listaImagenes:o,total:x,rowsPerPage:h,page:p,cambiarPagina:N,cambiarLimite:A,borrarImagen:function(e,t){return T.apply(this,arguments)}}))}));var gt=a(515),Et=a(209),Ot=a.n(Et);var jt=function(e){var t=e.IdNovela,a=e.capitulo,c=void 0===a?{}:a,o=e.guardar,i=e.cancelar,u=Object(n.useRef)(null),l=Object(n.useState)(""),s=Object(O.a)(l,2),p=s[0],d=s[1],f=Object(n.useState)(1),b=Object(O.a)(f,2),h=b[0],v=b[1],j=Object(n.useState)(""),y=Object(O.a)(j,2),x=y[0],k=y[1];Object(n.useEffect)((function(){Object.entries(c).length>0&&(d(c.titulo?c.titulo:""),v(c.numero?c.numero:1),k(c.cuerpo?c.cuerpo:""))}),[c]);var S=function(){var e=Object(E.a)(g.a.mark((function e(a){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),!t){e.next=7;break}return e.next=4,o({titulo:p,numero:h,cuerpo:x,novela:t});case 4:C(),e.next=8;break;case 7:console.log("no se reconoce el id de la novela");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){d(""),v(Number(h)+1),k("")};return r.a.createElement("form",{autoComplete:"off",style:{marginRight:"1rem"},onSubmit:S},r.a.createElement("div",null,r.a.createElement(pe.a,{required:!0,fullWidth:!0,autoFocus:!0,style:{margin:8},margin:"dense",id:"titulo_capitulo",label:"Titulo",value:p,onChange:function(e){return d(e.target.value)}}),r.a.createElement(pe.a,{required:!0,fullWidth:!0,style:{margin:8},type:"number",margin:"dense",id:"numero",label:"N\xfamero del Capitulo",value:h,onChange:function(e){return v(e.target.value)}}),r.a.createElement(Ot.a,{ref:u,value:x,config:{readonly:!1},onBlur:function(e){k(e.target.innerHTML)}})),r.a.createElement(w.a,{type:"submit",variant:"contained",color:"primary",style:{margin:"1rem"}},"Guardar"),r.a.createElement(w.a,{variant:"contained",style:{margin:"1rem 0rem",backgroundColor:m.a[500],color:"white"},onClick:i},"Cancelar"))};var yt=Object(u.g)((function(e){var t=e.match,a=Object(u.f)(),c=Object(n.useState)(!1),o=Object(O.a)(c,2),i=o[0],l=o[1],s=t.params.id;function p(){return(p=Object(E.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,et(t).then(function(){var e=Object(E.a)(g.a.mark((function e(t){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.data,!i||!a){e.next=7;break}return e.next=4,ee(null,{id:s,chapter:a._id},"actualizarCapituloEmision").then((function(){return l(!1)}));case 4:return e.abrupt("return",e.sent);case 7:return e.abrupt("return",!0);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.createElement("div",null,r.a.createElement(b,null,"Crear Capitulo"),r.a.createElement("p",null,"Capitulo en Emisi\xf3n"),r.a.createElement(gt.a,{checked:i,onChange:function(e){return l(e.target.checked)},color:"primary",name:"emision",inputProps:{"aria-label":"primary checkbox"}}),r.a.createElement(jt,{IdNovela:s,guardar:function(e){return p.apply(this,arguments)},cancelar:function(){return a.goBack()}}))}));var wt=Object(u.g)((function(e){var t=e.match,a=Object(u.f)(),c=Object(n.useState)(!1),o=Object(O.a)(c,2),i=o[0],l=o[1],s=Object(n.useState)({}),p=Object(O.a)(s,2),m=p[0],d=p[1],f=Object(n.useState)(null),h=Object(O.a)(f,2),v=h[0],j=h[1],y=t.params.id;function w(){return(w=Object(E.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xe(t).then((function(e){var t=e.data;Object.entries(t).length>0&&(d(t),j(t.novela?t.novela._id:null))})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(){return(x=Object(E.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!y||!t){e.next=4;break}return e.next=3,tt(y,t).then(function(){var e=Object(E.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.data,!i||!n){e.next=7;break}return e.next=4,ee(null,{id:v,chapter:n._id},"actualizarCapituloEmision").then((function(){l(!1),a.goBack()}));case 4:return e.abrupt("return",e.sent);case 7:return e.abrupt("return",!0);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:return e.abrupt("return",e.sent);case 4:case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.useEffect)((function(){y&&function(e){w.apply(this,arguments)}(y)}),[y]),r.a.createElement("div",null,r.a.createElement(b,null,"Editar Capitulo"),r.a.createElement("p",null,"Capitulo en Emisi\xf3n"),r.a.createElement(gt.a,{checked:i,onChange:function(e){return l(e.target.checked)},color:"primary",name:"emision",inputProps:{"aria-label":"primary checkbox"}}),r.a.createElement(jt,{IdNovela:v,capitulo:m,guardar:function(e){return x.apply(this,arguments)},cancelar:function(){return a.goBack()}}))}));var xt=a(222);var kt=Object(u.g)((function(e){var t=e.match,a=Object(u.f)(),c=Object(n.useState)(""),o=Object(O.a)(c,2),i=o[0],l=o[1],s=Object(n.useState)("miniatura"),p=Object(O.a)(s,2),d=p[0],f=p[1],b=Object(n.useState)(null),h=Object(O.a)(b,2),v=h[0],j=h[1],y=t.params.id;function x(){return(x=Object(E.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=new FormData,!y||!v){e.next=9;break}return n.append("titulo",i),n.append("tipo",d),n.append("novela",y),n.append("file",v),e.next=9,it(n).then((function(){return a.goBack()}));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.createElement("form",{autoComplete:"off",style:{marginRight:"1rem"},onSubmit:function(e){return x.apply(this,arguments)}},r.a.createElement("div",null,r.a.createElement(pe.a,{required:!0,fullWidth:!0,autoFocus:!0,style:{margin:8},margin:"dense",id:"titulo",label:"Titulo",value:i,onChange:function(e){return l(e.target.value)}}),r.a.createElement(pe.a,{required:!0,style:{margin:8},margin:"dense",id:"tipo",select:!0,label:"Tipo",value:d,onChange:function(e){return f(e.target.value)},helperText:"Selecciona el tipo de imagen"},r.a.createElement(me.a,{value:"miniatura"},"Miniatura"),r.a.createElement(me.a,{value:"portada"},"Portada"),r.a.createElement(me.a,{value:"wallpaper"},"Wallpaper")),r.a.createElement(xt.a,{acceptedFiles:["image/*"],dropzoneText:"Arrastra y suela la imagen a subir",onChange:function(e){return j(e[0])},filesLimit:1}),r.a.createElement(w.a,{type:"submit",variant:"contained",color:"primary",style:{margin:"1rem"}},"Guardar"),r.a.createElement(w.a,{onClick:function(){return a.goBack()},variant:"contained",style:{color:"white",backgroundColor:m.a[500]}},"Cancelar")))})),St=a(501);var Ct=function(e){var t=e.accion,a=e.objeto,c=void 0===a?{}:a,o=e.guardar,i=e.abrir,u=e.visible,l=Object(n.useState)(""),s=Object(O.a)(l,2),p=s[0],m=s[1],d=Object(n.useState)(""),f=Object(O.a)(d,2),b=f[0],h=f[1],v=Object(n.useState)(1),j=Object(O.a)(v,2),y=j[0],x=j[1];Object(n.useEffect)((function(){void 0!==c.nombre&&(m(c.nombre),h(c.descripcion),x(c.tipo))}),[c]);var k=function(){var e=Object(E.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,o({nombre:p,descripcion:b,tipo:y});case 3:S();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){m(""),h(""),x(1)};return r.a.createElement(ne.a,{onClose:i,"aria-labelledby":"simple-dialog-title",open:u},r.a.createElement(re.a,{id:"simple-dialog-title"},t),r.a.createElement(ce.a,null,r.a.createElement("form",{autoComplete:"off",style:{marginRight:"1rem"},onSubmit:k},r.a.createElement("div",null,r.a.createElement(pe.a,{required:!0,fullWidth:!0,style:{margin:8},id:"nombre",label:"Nombre",value:p,onChange:function(e){return m(e.target.value)}}),r.a.createElement(pe.a,{required:!0,fullWidth:!0,style:{margin:8},id:"descripcion",label:"Descripci\xf3n",value:b,onChange:function(e){return h(e.target.value)}}),r.a.createElement(pe.a,{required:!0,fullWidth:!0,style:{margin:8},id:"tipo",select:!0,label:"Selecciona",value:y,onChange:function(e){return x(e.target.value)}},r.a.createElement(me.a,{value:1},"Tipo"),r.a.createElement(me.a,{value:2},"Categoria"),r.a.createElement(me.a,{value:3},"Etiqueta"))),r.a.createElement(w.a,{type:"submit",variant:"contained",color:"primary",style:{margin:"1rem"}},"Guardar"),r.a.createElement(w.a,{onClick:i,variant:"contained",color:"default"},"Cancelar"))))},Pt=["Tipos","Categorias","Etiquetas"];var Tt=[{path:"/cms/dashboard",exact:!0,component:h},{path:"/cms/novela",exact:!0,component:function(){var e=Object(n.useState)([]),t=Object(O.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(0),u=Object(O.a)(o,2),l=u[0],s=u[1],p=Object(n.useState)(10),d=Object(O.a)(p,2),f=d[0],h=d[1],v=Object(n.useState)(1),j=Object(O.a)(v,2),Y=j[0],L=j[1],G=Object(n.useState)(!1),R=Object(O.a)(G,2),H=R[0],F=R[1],U=Object(n.useState)(null),V=Object(O.a)(U,2),J=V[0],K=V[1],X=Object(n.useState)(""),Q=Object(O.a)(X,2),Z=Q[0],ee=Q[1];function ae(e,t){return ne.apply(this,arguments)}function ne(){return(ne=Object(E.a)(g.a.mark((function e(t,a){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$({page:t,limit:a}).then((function(e){var t=e.data;t.docs&&t.docs.length>0&&(c(t.docs),L(t.totalDocs))})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function re(){return(re=Object(E.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!J){e.next=5;break}return e.next=3,te(J).then(Object(E.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ie(),e.next=3,ae(Number(l)+1,f);case 3:case"end":return e.stop()}}),e)}))));case 3:e.next=6;break;case 5:ie();case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(n.useEffect)((function(){ae(1,10)}),[]);var ce=function(){var e=Object(E.a)(g.a.mark((function e(t,a){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(a),e.next=3,ae(Number(a)+1,f);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),oe=function(){var e=Object(E.a)(g.a.mark((function e(t){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=parseInt(t.target.value,10),h(a),s(0),e.next=5,ae(1,a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ie=function(){return F(!H)};return r.a.createElement("div",null,r.a.createElement(b,null,"Lista de Novelas"),r.a.createElement(w.a,{component:i.b,to:"/cms/novela/crear",variant:"contained",startIcon:r.a.createElement(z.a,null),style:{marginBottom:".5rem",backgroundColor:I.a[500],color:"white"}},"Nuevo"),r.a.createElement(x.a,{style:{maxHeight:500}},r.a.createElement(k.a,{stickyHeader:!0},r.a.createElement(S.a,null,r.a.createElement(C.a,null,r.a.createElement(P.a,null,"#"),r.a.createElement(P.a,null,"Titulo"),r.a.createElement(P.a,null,"Tipo"),r.a.createElement(P.a,null,"Estado"),r.a.createElement(P.a,{align:"center"},"Activo"),r.a.createElement(P.a,{align:"center"},"Capitulo Emisi\xf3n"),r.a.createElement(P.a,null,"Actualizado"),r.a.createElement(P.a,{align:"center"},"Folder"),r.a.createElement(P.a,{align:"center"},"Acciones"))),r.a.createElement(T.a,null,a.length>0?a.map((function(e,t){return r.a.createElement(C.a,{key:t},r.a.createElement(P.a,null,t+1),r.a.createElement(P.a,null,e.titulo),r.a.createElement(P.a,null,e.tipo),r.a.createElement(P.a,null,e.estado),r.a.createElement(P.a,{align:"center"},e.activo?"Si":"No"),r.a.createElement(P.a,{align:"center"},e.capitulo_emision?e.capitulo_emision.numero:"-"),r.a.createElement(P.a,null,y()(e.updatedAt).format("DD-MM-YYYY")),r.a.createElement(P.a,null,r.a.createElement(N.a,{size:"small"},r.a.createElement(w.a,{component:i.b,to:"/cms/novela/capitulos/".concat(e._id),params:{id:e._id}},r.a.createElement(q.a,{color:"secondary"})),r.a.createElement(w.a,{component:i.b,to:"/cms/novela/imagenes/".concat(e._id),params:{id:e._id}},r.a.createElement(W.a,{color:"primary"})))),r.a.createElement(P.a,null,r.a.createElement(N.a,{size:"small"},r.a.createElement(w.a,{component:i.b,to:"/cms/novela/editar/".concat(e._id),params:{id:e._id}},r.a.createElement(M.a,{style:{color:B.a[500]}})),r.a.createElement(w.a,{onClick:function(){return t=e._id,a=e.titulo,ee(a),K(t),void ie();var t,a}},r.a.createElement(_.a,{style:{color:m.a[500]}})))))})):r.a.createElement(C.a,{style:{height:120}},r.a.createElement(P.a,null,"Sin datos."))))),r.a.createElement(k.a,null,r.a.createElement(A.a,null,r.a.createElement(C.a,null,r.a.createElement(D.a,{rowsPerPageOptions:[10,25,50,100],colSpan:3,count:Y,rowsPerPage:f,page:l,SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0},onChangePage:ce,onChangeRowsPerPage:oe})))),r.a.createElement(le,{titulo:"Eliminar '".concat(Z,"'"),cuerpo:"Esta acci\xf3n eliminar\xe1 la novela de la base de datos, si la novela tiene capitulos o imagenes vinculadas se pondra en estado 'inactivo'.",abrir:ie,visible:H,accion:function(){return re.apply(this,arguments)}}))}},{path:"/cms/novela/crear",exact:!0,component:function(){var e=Object(u.f)();function t(){return(t=Object(E.a)(g.a.mark((function t(a){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(Object.entries(a).length>0)){t.next=3;break}return t.next=3,Z(a).then((function(){return e.push("/cms/novela")})).catch((function(e){return console.log(e)}));case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return r.a.createElement("div",null,r.a.createElement(b,null,"Crear Novela"),r.a.createElement(Se,{guardar:function(e){return t.apply(this,arguments)}}))}},{path:"/cms/novela/editar/:id",exact:!0,component:lt},{path:"/cms/novela/capitulos/:id",exact:!0,component:pt},{path:"/cms/novela/imagenes/:id",exact:!0,component:vt},{path:"/cms/capitulo",exact:!0,component:function(){var e=Object(n.useState)([]),t=Object(O.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(0),i=Object(O.a)(o,2),u=i[0],l=i[1],s=Object(n.useState)(30),p=Object(O.a)(s,2),m=p[0],d=p[1],f=Object(n.useState)(1),h=Object(O.a)(f,2),v=h[0],j=h[1];function y(e,t){return w.apply(this,arguments)}function w(){return(w=Object(E.a)(g.a.mark((function e(t,a){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$e(t,a).then((function(e){var t=e.data;t.docs&&t.docs.length>0&&(c(t.docs),j(t.totalDocs))})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(){return(x=Object(E.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=4;break}return e.next=3,at(t).then(Object(E.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(Number(u)+1,m);case 2:case"end":return e.stop()}}),e)}))));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(n.useEffect)((function(){y(1,30)}),[]);var k=function(){var e=Object(E.a)(g.a.mark((function e(t,a){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(a),e.next=3,y(Number(a)+1,m);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),S=function(){var e=Object(E.a)(g.a.mark((function e(t){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=parseInt(t.target.value,10),d(a),l(0),e.next=5,y(1,a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(b,null,"Ultimos Capitulos Agregados"),r.a.createElement(st,{listaCapitulos:a,total:v,rowsPerPage:m,page:u,cambiarPagina:k,cambiarLimite:S,borrarCapitulo:function(e){return x.apply(this,arguments)}}))}},{path:"/cms/capitulo/crear/:id",exact:!0,component:yt},{path:"/cms/capitulo/editar/:id",exact:!0,component:wt},{path:"/cms/imagen",exact:!0,component:function(){var e=Object(n.useState)([]),t=Object(O.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(0),i=Object(O.a)(o,2),u=i[0],l=i[1],s=Object(n.useState)(30),p=Object(O.a)(s,2),m=p[0],d=p[1],f=Object(n.useState)(1),h=Object(O.a)(f,2),v=h[0],j=h[1];function y(e,t,a){return w.apply(this,arguments)}function w(){return(w=Object(E.a)(g.a.mark((function e(t,a,n){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nt(t,a).then((function(e){var t=e.data;t.docs&&t.docs.length>0&&(c(t.docs),j(t.totalDocs))}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(){return(x=Object(E.a)(g.a.mark((function e(t,a){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!a){e.next=4;break}return e.next=3,ut(t,a).then(Object(E.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(Number(u)+1,m);case 2:case"end":return e.stop()}}),e)}))));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(n.useEffect)((function(){y(1,30)}),[]);var k=function(){var e=Object(E.a)(g.a.mark((function e(t,a){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(a),e.next=3,y(Number(a)+1,m);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),S=function(){var e=Object(E.a)(g.a.mark((function e(t){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=parseInt(t.target.value,10),d(a),l(0),e.next=5,y(1,a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(b,null,"Ultimas Imagenes Agregadas"),r.a.createElement(ht,{listaImagenes:a,total:v,rowsPerPage:m,page:u,cambiarPagina:k,cambiarLimite:S,borrarImagen:function(e,t){return x.apply(this,arguments)}}))}},{path:"/cms/imagen/crear/:id",exact:!0,component:kt},{path:"/cms/extra",exact:!0,component:function(){var e=Object(n.useState)(null),t=Object(O.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(0),i=Object(O.a)(o,2),u=i[0],l=i[1],s=Object(n.useState)([]),p=Object(O.a)(s,2),d=p[0],f=p[1],h=Object(n.useState)({}),v=Object(O.a)(h,2),j=v[0],A=v[1],D=Object(n.useState)(null),q=Object(O.a)(D,2),W=q[0],Y=q[1],L=Object(n.useState)(null),G=Object(O.a)(L,2),R=G[0],H=G[1],F=Object(n.useState)(!1),U=Object(O.a)(F,2),V=U[0],J=U[1],K=Object(n.useState)(!1),X=Object(O.a)(K,2),$=X[0],Q=X[1],Z=Object(n.useState)(!1),ee=Object(O.a)(Z,2),te=ee[0],ae=ee[1];function ne(e){return re.apply(this,arguments)}function re(){return(re=Object(E.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ye(Number(t)+1).then((function(e){f(e.data)})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ce(){return(ce=Object(E.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,we(t).then(Object(E.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return se(),e.next=3,ne(u);case 3:case"end":return e.stop()}}),e)})))).catch((function(e){console.log(e),se()}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oe(){return(oe=Object(E.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xe(t,W).then(Object(E.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return pe(),e.next=3,ne(u);case 3:case"end":return e.stop()}}),e)})))).catch((function(e){console.log(e),pe()}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ie(){return(ie=Object(E.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ke(W).then(Object(E.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ae(!1),e.next=3,ne(u);case 3:case"end":return e.stop()}}),e)})))).catch((function(e){ae(!1),console.log(e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(n.useEffect)((function(){ne(0)}),[]);var ue=function(){var e=Object(E.a)(g.a.mark((function e(t,a){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(a),e.next=3,ne(a);case 3:c(null);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),se=function(){return J(!V)},pe=function(){return Q(!$)},be=function(){return ae(!te)};return r.a.createElement("div",null,r.a.createElement(St.a,null,r.a.createElement(b,null,"Lista de Extras"),r.a.createElement(de.a,{component:"nav","aria-label":"Tipos de extras"},r.a.createElement(fe.a,{button:!0,"aria-haspopup":"true","aria-controls":"lock-menu","aria-label":"seleccionar extra",onClick:function(e){return c(e.currentTarget)}},r.a.createElement(ve.a,{primary:"Seleccionar extra",secondary:Pt[u]}))),r.a.createElement(Ve.a,{id:"lock-menu",anchorEl:a,keepMounted:!0,open:Boolean(a),onClose:function(){return c(null)}},Pt.map((function(e,t){return r.a.createElement(me.a,{key:e,selected:t===u,onClick:function(e){return ue(e,t)}},e)})))),r.a.createElement(w.a,{variant:"contained",startIcon:r.a.createElement(z.a,null),style:{marginBottom:".5rem",backgroundColor:I.a[500],color:"white"},onClick:se},"Nuevo"),r.a.createElement(x.a,{style:{maxHeight:500}},r.a.createElement(k.a,{stickyHeader:!0},r.a.createElement(S.a,null,r.a.createElement(C.a,null,r.a.createElement(P.a,null,"#"),r.a.createElement(P.a,null,"Nombre"),r.a.createElement(P.a,null,"Descripcion"),r.a.createElement(P.a,null,"Acrualizado"),r.a.createElement(P.a,{align:"center"},"Acciones"))),r.a.createElement(T.a,null,d.length>0?d.map((function(e,t){return r.a.createElement(C.a,{key:t},r.a.createElement(P.a,null,t+1),r.a.createElement(P.a,null,e.nombre),r.a.createElement(P.a,null,e.descripcion),r.a.createElement(P.a,null,y()(e.updatedAt).format("DD-MM-YYYY")),r.a.createElement(P.a,{align:"center"},r.a.createElement(N.a,{size:"small"},r.a.createElement(w.a,{onClick:function(){return A(t=e),Y(t._id),void pe();var t}},r.a.createElement(M.a,{style:{color:B.a[500]}})),r.a.createElement(w.a,{onClick:function(){return function(e,t){Y(e),H(t),be()}(e._id,e.nombre)}},r.a.createElement(_.a,{style:{color:m.a[500]}})))))})):r.a.createElement(C.a,{style:{height:120}},r.a.createElement(P.a,null,"Sin datos."))))),r.a.createElement(Ct,{key:"Crear",accion:"Crear",abrir:se,visible:V,guardar:function(e){return ce.apply(this,arguments)}}),r.a.createElement(Ct,{key:"Actualizar",accion:"Actualizar",objeto:j,abrir:pe,visible:$,guardar:function(e){return oe.apply(this,arguments)}}),r.a.createElement(le,{titulo:"Eliminar '".concat(R,"'"),cuerpo:"Esta acci\xf3n eliminar\xe1 el objeto seleccionado.",abrir:be,visible:te,accion:function(){return ie.apply(this,arguments)}}))}}],Nt=a(516),At=a(126),Dt=a(532),It=a(529),Bt=a(517);function zt(){return r.a.createElement(f.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(Bt.a,{color:"inherit",href:V},"TuNovelaOnline")," ",(new Date).getFullYear(),".")}var qt=a(70),Wt=Object(Ce.a)((function(e){return{root:{display:"flex"},toolbar:{paddingRight:24},toolbarIcon:Object(Y.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36},menuButtonHidden:{display:"none"},title:{flexGrow:1},drawerPaper:{position:"relative",whiteSpace:"nowrap",width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerPaperClose:Object(qt.a)({overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),width:e.spacing(7)},e.breakpoints.up("sm"),{width:e.spacing(9)}),appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,height:"100vh",overflow:"auto"},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240}}}),{index:1}),Mt=a(3),_t=a(518),Yt=a(230),Lt=a(519),Gt=a(520),Rt=function(){var e=Object(E.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",K({url:"auth/login",method:"POST",data:new URLSearchParams(t)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ht=function(){var e=Object(E.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",X({url:"auth/session",method:"GET"}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ft=function(){var e=Object(E.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",X({url:"auth/logout",method:"GET"}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function Ut(e){var t=e.abrirMenu,a=e.open,n=Object(u.f)(),c=Wt(),o=function(){var e=Object(E.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ft().then(Object(E.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:H.a.remove(J),n.push("/cms/login");case 2:case"end":return e.stop()}}),e)})))).catch((function(e){console.log(e),console.log("Error cerrando sesi\xf3n.")}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(_t.a,{position:"absolute",className:Object(Mt.a)(c.appBar,a&&c.appBarShift)},r.a.createElement(St.a,{className:c.toolbar},r.a.createElement(Yt.a,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:t,className:Object(Mt.a)(c.menuButton,a&&c.menuButtonHidden)},r.a.createElement(Lt.a,null)),r.a.createElement(f.a,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,className:c.title}),r.a.createElement(Yt.a,{color:"inherit",onClick:o},r.a.createElement(Gt.a,null))))}var Vt=a(527),Jt=a(525),Kt=a(528),Xt=a(521),$t=a(522),Qt=a(523),Zt=a(524),ea=a(526),ta=r.a.createElement("div",null,r.a.createElement(fe.a,{button:!0,component:i.b,to:"/cms/dashboard"},r.a.createElement(be.a,null,r.a.createElement(Xt.a,null)),r.a.createElement(ve.a,{primary:"Dashboard"})),r.a.createElement(fe.a,{button:!0,component:i.b,to:"/cms/novela"},r.a.createElement(be.a,null,r.a.createElement($t.a,null)),r.a.createElement(ve.a,{primary:"Novelas"})),r.a.createElement(fe.a,{button:!0,component:i.b,to:"/cms/capitulo"},r.a.createElement(be.a,null,r.a.createElement(Qt.a,null)),r.a.createElement(ve.a,{primary:"Capitulos"})),r.a.createElement(fe.a,{button:!0,component:i.b,to:"/cms/imagen"},r.a.createElement(be.a,null,r.a.createElement(Zt.a,null)),r.a.createElement(ve.a,{primary:"Imagenes"})),r.a.createElement(Jt.a,null),r.a.createElement(fe.a,{button:!0,component:i.b,to:"/cms/extra"},r.a.createElement(be.a,null,r.a.createElement(ea.a,null)),r.a.createElement(ve.a,{primary:"Extras"})));function aa(e){var t=e.cerrarMenu,a=e.open,n=Wt();return r.a.createElement(Vt.a,{variant:"permanent",classes:{paper:Object(Mt.a)(n.drawerPaper,!a&&n.drawerPaperClose)},open:a},r.a.createElement("div",{className:n.toolbarIcon},r.a.createElement(f.a,{component:"h1",variant:"h6",align:"center",color:"inherit",noWrap:!0,className:n.title},"TNO CPanel"),r.a.createElement(Yt.a,{onClick:t},r.a.createElement(Kt.a,null))),r.a.createElement(Jt.a,null),r.a.createElement(de.a,null,ta),r.a.createElement(Jt.a,null))}var na=a(121),ra=a(122),ca=a(225),oa=a(223);var ia,ua=(ia=function(e){var t=e.children,a=Wt(),n=r.a.useState(!0),c=Object(O.a)(n,2),o=c[0],i=c[1];return r.a.createElement("div",{className:a.root},r.a.createElement(Ut,{abrirMenu:function(){i(!0)},open:o}),r.a.createElement(aa,{cerrarMenu:function(){i(!1)},open:o}),r.a.createElement("main",{className:a.content},r.a.createElement("div",{className:a.appBarSpacer}),r.a.createElement(It.a,{maxWidth:"lg",className:a.container},r.a.createElement(Nt.a,{container:!0,spacing:3},r.a.createElement(Nt.a,{item:!0,xs:12},r.a.createElement(At.a,{className:a.paper},t))),r.a.createElement(Dt.a,{pt:4},r.a.createElement(zt,null)))))},function(e){Object(ca.a)(a,e);var t=Object(oa.a)(a);function a(){return Object(na.a)(this,a),t.apply(this,arguments)}return Object(ra.a)(a,[{key:"componentDidMount",value:function(){var e=Object(E.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(H.a.get(J)){e.next=5;break}document.location.href="/cms/login",e.next=7;break;case 5:return e.next=7,Ht().then((function(e){"error"===e.status&&(H.a.remove(J),document.location.href="/cms/login")})).catch((function(e){console.log(e),console.log("error de sesion en (PrivateRoutes)")}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(ia,this.props)}}]),a}(n.Component));function la(){return r.a.createElement("div",null,"Por aqui no")}var sa=a(536),pa=a(220),ma=a.n(pa),da=a(219),fa=a.n(da),ba=function(){function e(t){Object(na.a)(this,e),this.decodedToken={email:"",exp:0};try{t&&(this.decodedToken=fa()(t))}catch(a){console.log("Error"),console.log(a)}}return Object(ra.a)(e,[{key:"isValid",get:function(){return!this.isExpired}},{key:"expiresAt",get:function(){return new Date(1e3*this.decodedToken.exp)}},{key:"isExpired",get:function(){return new Date>this.expiresAt}},{key:"authorizationString",get:function(){return"Bearer ".concat(this.token)}}]),e}(),ha=Object(Ce.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function va(){var e=ha(),t=Object(u.f)(),a=Object(n.useState)({username:"",password:""}),c=Object(O.a)(a,2),o=c[0],i=c[1],l=Object(n.useState)({username:!1,password:!1}),s=Object(O.a)(l,2),p=s[0],m=s[1],d=Object(n.useState)(!1),b=Object(O.a)(d,2),h=b[0],v=b[1];Object(n.useEffect)((function(){var e=H.a.get(J),a=new ba(e);(e||a.isValid)&&t.push("/cms/dashboard")}),[]);var j=function(){var e=Object(E.a)(g.a.mark((function e(a){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),v(!0),e.next=4,Rt(o).then((function(e){var a=e.data,n=e.errors;if(v(!1),!a)return m(n);H.a.set(J,a),t.push("/cms/dashboard")})).catch((function(e){return console.log(e),v(!1)}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(e){e.persist(),i(Object(Y.a)(Object(Y.a)({},o),{},Object(qt.a)({},e.target.name,e.target.value)))};return r.a.createElement(It.a,{component:"main",maxWidth:"xs"},r.a.createElement("div",{className:e.paper},r.a.createElement(sa.a,{className:e.avatar},r.a.createElement(ma.a,null)),r.a.createElement(f.a,{component:"h1",variant:"h5"},"TNO Cms"),r.a.createElement("form",{className:e.form,noValidate:!1,onSubmit:j},r.a.createElement(pe.a,{onChange:y,value:o.username,variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Usuario",name:"username",autoComplete:"username",autoFocus:!0,error:!!p.username,helperText:p.username}),r.a.createElement(pe.a,{onChange:y,value:o.password,variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",error:!!p.password,helperText:p.password}),h?r.a.createElement(Nt.a,{container:!0,direction:"row",justify:"center",alignItems:"center"},r.a.createElement(dt.a,{color:"primary",className:e.submit})):r.a.createElement(w.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit},"Acceder"))),r.a.createElement(Dt.a,{mt:8},r.a.createElement(zt,null)))}var ga=function(){return r.a.createElement(l.a,{theme:d},r.a.createElement(s.a,null),r.a.createElement(i.a,null,r.a.createElement(u.c,null,r.a.createElement(u.a,{exact:!0,path:"/",component:la}),r.a.createElement(u.a,{exact:!0,path:"/cms/login",component:va}),r.a.createElement(ua,null,Tt.map((function(e,t){return r.a.createElement(u.a,{key:t,path:e.path,exact:e.exact,render:function(t){return r.a.createElement(e.component,t)}})}))))))},Ea=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Oa(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}o.a.render(r.a.createElement(ga,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");Ea?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Oa(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):Oa(t,e)}))}}()}},[[244,1,2]]]);
//# sourceMappingURL=main.04939028.chunk.js.map